(function(){"use strict";function a(){for(var a=0;a<_quantiDataLayer.length;a++)if("domain"==_quantiDataLayer[a][0])return _quantiDataLayer[a][1];return console.warn("QUANTI : the domain property is recommended"),!1}function b(a){for(var b=0;b<_quantiDataLayer.length;b++)if(_quantiDataLayer[b][0]==a)return _quantiDataLayer[b][1];return"(not set)"}function c(){var a="";try{a=i.top.document.referrer}catch(b){if(i.parent)try{a=i.parent.document.referrer}catch(b){a=""}}return""===a&&(a=h.referrer),a}function d(a,c){g(a);var d=new XMLHttpRequest;d.open("POST",b("trackerUrl"),!0),d.setRequestHeader("Content-Type","text/plain"),d.send(JSON.stringify({d:a})),d.onreadystatechange=function(){(4===d.readyState&&"\"processed2\""!==d.responseText||200!==d.status&&201!==d.status)&&(console.warn("QUANTI : request failed",{status:d.status,responseText:d.responseText}),c&&c())}}function e(){const a=navigator.userAgent;return /(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(a)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(a)?"mobile":"desktop"}function f(a,b){a.push(["referrer",c()]),a.push(["visitorId",m]),a.push(["deviceType",e()]),a.push(["screenResolution",screen.height>screen.width?`${screen.height}x${screen.width}`:`${screen.width}x${screen.height}`]),a.push(["userAgent",navigator.userAgent]),a.push(["eventType",b]);var d=navigator.cpuClass;d&&a.push(["cpuClass",d]),n&&a.push(["gaClientId",n])}function g(a){for(var b,c=0;c<a.length;c++){b=!1;for(var d=0;d<l.length;d++)if(a[c][0]===l[d][0]){b=!0;for(var e=["eventType","event","date","conversionValue"],f=!1,g=0;g<e.length;g++)a[c][0]===e[g]&&(f=!0);if(!f&&typeof a[c][1]!==l[d][1])"string"===l[c][1]&&"string"!=typeof a[c][1]?console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]}):"integer"===l[c][1]||"float"===l[c][1]&&"number"!=typeof a[c][1]?console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]}):"boolean"===l[c][1]&&"boolean"!=typeof a[c][1]&&console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]});else switch(a[c][0]){case"conversionValue":try{var h=a[c][1];"string"==typeof h?isNaN(parseFloat(h))&&console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]}):console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]})}catch{console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]})}break;case"eventType":"event"!==a[c][1]&&"pageView"!==a[c][1]&&console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]});break;case"event":for(let b=1;b<a[c].length;b++)"string"!=typeof a[c][b]&&console.warn(`QUANTI : this data must be a string`,{property:a[c][0],value:a[c][b]});break;case"date":var m=new Date(a[c][1]);"Invalid Date"===m.toString()&&console.warn(`QUANTI : ${l[d][2]}`,{property:a[c][0],value:a[c][1]})}}b||"string"==typeof a[c][1]||console.warn(`QUANTI : the property ${a[c][0]} isn't a default property and must be a string`,{property:a[c][0],value:a[c][1]})}}var h=document,i=window,l=[["trackerUrl","string","the trackerUrl property must be a string"],["accountId","string","the accountId property must be a string"],["domain","string","the domain property must be a string"],["url","string","the url property must be a string"],["referrer","string","the referrer property must be a string"],["visitorId","string","the visitorId property must be a string"],["deviceType","string","the deviceType property must be a string"],["gaClientId","string","the gaClientId property must be a string"],["screenResolution","string","the screenResolution property must be a string"],["userAgent","string","the userAgent property must be a string"],["cpuClass","string","the cpuClass property must be a string"],["date","date","the date property must be a valid date, with YYYY-MM-DD hh:mm:ss format"],["event","event","the event property must be an array with 5 strings"],["eventType","eventType","the eventType property must be event or pageView"],["eventCategory","string","the eventCategory property must be a string"],["eventAction","string","the eventAction property must be a string"],["eventLabel","string","the eventLabel property must be a string"],["eventValue","string","the eventValue property must be a string"],["userId","string","the userId property must be a string"],["conversionId","string","the conversionId property must be a string"],["conversionValue","string","the conversionValue property must be a string, and must be a float with a dot or a comma as decimal separator"],["conversionType","string","the conversionType property must be a string"],["consent","string","the consent property must be a string"]];var m=function(){var b;let d="qtvtru=",e=decodeURIComponent(h.cookie),f=e.split(";");for(let a,c=0;c<f.length;c++){for(a=f[c];" "==a.charAt(0);)a=a.substring(1);0==a.indexOf(d)&&(b=a.substring(d.length,a.length))}if(!b||0==b.length){let e=a();b=Date.now().toString(32)+Math.random().toString(16);var c=`qtvtru=${b}; expires=${new Date(new Date().getTime()+31536000000).toGMTString()}; path=/; domain=${e}`;h.cookie=c}return b}(),n=function(){var a;let b="_ga=",c=decodeURIComponent(h.cookie),d=c.split(";");for(let e,c=0;c<d.length;c++){for(e=d[c];" "==e.charAt(0);)e=e.substring(1);0==e.indexOf(b)&&(a=e.substring(b.length,e.length))}return a}();_quantiTag=function(){if(0!==arguments.length){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);_quantiDataLayer.push(a)}for(var c=[[],[]],b=0;b<_quantiDataLayer.length;b++)"hit"===_quantiDataLayer[b][0]&&(c[0].push(_quantiDataLayer[b]),c[1].push(b));if(0<c.length){for(var b=c[1].length-1;0<=b;b--)_quantiDataLayer.splice(c[1][b],1);for(let a=0;a<c[1].length;a++){var e="event";"page_view"==c[0][a][1]&&(e="pageView");for(var g=[],b=0;b<_quantiDataLayer.length;b++)"hit"!==_quantiDataLayer[b][0]&&(null!=_quantiDataLayer[b][1]||null!=_quantiDataLayer[b][1])&&g.push([_quantiDataLayer[b][0],"".concat(_quantiDataLayer[b][1])]);for(const b in c[0][a][2])if(Object.hasOwnProperty.call(c[0][a][2],b)){let d=b;"page_url"==b?d="url":"user_id"==b?d="userId":"conversion_id"==b?d="conversionId":"conversion_value"==b?d="conversionValue":"conversion_type"==b?d="conversionType":"product_ids"==b?d="productIds":"tag_version"==b?d="tagVersion":"event_category"==b||"event_action"==b||"event_label"==b||"event_value"==b;let e=c[0][a][2][b];(e!=null||null!=e)&&g.push([d,"".concat(e)])}if("event"==e){var h=["event"];c[0][a][2].event_category!=null||null!=c[0][a][2].event_category?h.push(c[0][a][2].event_category):h.push(""),c[0][a][2].event_action!=null||null!=c[0][a][2].event_action?h.push(c[0][a][2].event_action):h.push(""),c[0][a][2].event_label!=null||null!=c[0][a][2].event_label?h.push(c[0][a][2].event_label):h.push(""),c[0][a][2].event_value!=null||null!=c[0][a][2].event_value?h.push(c[0][a][2].event_value):h.push(""),g.push(h)}f(g,e),d(g,function(){})}}},_quantiTag()})();